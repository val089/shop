(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{49:function(e,t,c){},50:function(e,t,c){},56:function(e,t,c){},59:function(e,t,c){},60:function(e,t,c){},61:function(e,t,c){},63:function(e,t,c){},81:function(e,t,c){},82:function(e,t,c){},83:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},86:function(e,t,c){},88:function(e,t,c){},89:function(e,t,c){"use strict";c.r(t);var a=c(0),r=c.n(a),s=c(23),n=c.n(s),i=(c(49),c(16)),o=c(4),l=(c(50),c(1)),j=function(e){var t=e.image,c=e.text;return Object(l.jsxs)("div",{className:"logo",children:[Object(l.jsx)("img",{className:"logo__img",src:t,alt:"logo"}),Object(l.jsx)("h1",{className:"logo__text",children:c})]})};j.defaultProps={text:"Logo"};var b=j,u=c(40),d=c(42),m=(c(56),c(8)),O=c(9),_=(c(59),c(60),function(e){var t=e.onClick,c=e.label;return Object(l.jsx)("button",{className:"button",onClick:t,children:c})}),h=_;_.defaultProps={label:"Click ;)"};c(61);var f=function(e){var t,c=e.item;return Object(l.jsxs)("div",{className:"subcart-item",children:[Object(l.jsx)("img",{className:"subcart-item__img",src:c.cover_url,alt:"book cover"}),Object(l.jsx)("h4",{className:"subcart-item__title",children:"".concat(c.title.slice(0,20),"...")}),Object(l.jsxs)("p",{className:"subcart-item__quantity",children:["x ",c.qty," "]}),Object(l.jsxs)("p",{className:"subcart-item__price",children:[(t=c.price,(t/100).toFixed(2))," ",c.currency]})]})};var p=function(e){var t,c=e.data,r=Object(a.useState)(0),s=Object(O.a)(r,2),n=s[0],o=s[1];return Object(a.useEffect)((function(){var e=0;c.map((function(t){return e+=t.qty*t.price})),o(e)}),[c,n,o]),Object(l.jsxs)("div",{className:"subcart",children:[Object(l.jsx)("header",{className:"subcart__header",children:Object(l.jsx)("h4",{className:"subcart__title",children:"Produkty"})}),Object(l.jsxs)("main",{className:"subcart__products",children:[0===c.length&&Object(l.jsx)("p",{className:"subcart__info",children:"Koszyk jest posty"}),c.map((function(e){return Object(l.jsx)(f,{item:e},e.id)}))]}),Object(l.jsxs)("footer",{className:"subcart__footer",children:[Object(l.jsxs)("p",{className:"subcart__total",children:["SUMA: ",Object(l.jsx)("span",{className:"subcart__total-price",children:(t=n,(t/100).toFixed(2))})," PLN"]}),Object(l.jsx)(i.b,{to:"/cart",children:Object(l.jsx)(h,{label:"PRZEJD\u0179 DO KOSZYKA"})})]})]})};var x=Object(m.b)((function(e){return{cart:e.shop.cart}}))((function(e){var t=e.cart,c={display:t.length>0?"flex":"none"};return Object(l.jsxs)("div",{className:"cart",children:[Object(l.jsx)(u.a,{icon:d.a,className:"cart__icon"}),Object(l.jsx)("span",{className:"cart__counter",style:c,children:t.length}),Object(l.jsx)(p,{data:t})]})})),N=(c(63),c.p+"static/media/logo.70393905.png"),y=function(){return Object(l.jsx)("header",{className:"header",children:Object(l.jsxs)("div",{className:"header__container",children:[Object(l.jsx)(b,{image:N,text:"Shop.pl"}),Object(l.jsx)(x,{})]})})},v=c(5),g=c(6),E=c(25),k=c.n(E),S=k.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PROXY_API||"http://localhost:3001/"}),C="api/book/",P="FETCH_BOOKS_REQUESTED",F="FETCH_BOOKS_SUCCEEDED",A="FETCH_BOOKS_FAILED",T="ADD_TO_CART",D="REMOVE_FROM_CART",L="ADJUST_QTY",q=function(){return{type:P}},z=function(){return{type:A}},K=function(e){return{type:F,payload:e}},R=function(e){return{type:D,payload:{id:e}}},w={books:[],cart:[],isLoading:!1,isError:!1},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(g.a)(Object(g.a)({},e),{},{isLoading:!0,isError:!1});case F:return Object(g.a)(Object(g.a)({},e),{},{isLoading:!1,isError:!1,books:t.payload});case A:return Object(g.a)(Object(g.a)({},e),{},{isLoading:!1,isError:!0});case T:var c=e.books.find((function(e){return e.id===t.payload.id})),a=e.cart.find((function(e){return e.id===t.payload.id}));return Object(g.a)(Object(g.a)({},e),{},{cart:a?e.cart.map((function(e){return e.id===t.payload.id?Object(g.a)(Object(g.a)({},e),{},{qty:e.qty+1}):e})):[].concat(Object(v.a)(e.cart),[Object(g.a)(Object(g.a)({},c),{},{qty:1})])});case D:return Object(g.a)(Object(g.a)({},e),{},{cart:e.cart.filter((function(e){return e.id!==t.payload.id}))});case L:return Object(g.a)(Object(g.a)({},e),{},{cart:e.cart.map((function(e){return e.id===t.payload.id?Object(g.a)(Object(g.a)({},e),{},{qty:t.payload.qty}):e}))});default:return e}},M=(c(81),c(82),{addToCart:function(e){return{type:T,payload:{id:e}}}}),B=Object(m.b)(null,M)((function(e){var t,c=e.data,a=e.addToCart;return Object(l.jsxs)("div",{className:"book",children:[Object(l.jsx)("div",{className:"book__img-container",children:Object(l.jsx)("img",{className:"book__img",src:c.cover_url,alt:"single book"})}),Object(l.jsxs)("p",{className:"book__pages",children:["Liczba stron: ",c.pages]}),Object(l.jsx)("h2",{className:"book__title",children:c.title}),Object(l.jsx)("p",{className:"book__author",children:c.author}),Object(l.jsx)("div",{className:"book__price-container",children:Object(l.jsxs)("p",{className:"book__price",children:[(t=c.price,(t/100).toFixed(2))," ",c.currency]})}),Object(l.jsx)(h,{onClick:function(){return a(c.id)},label:"DODAJ DO KOSZYKA"})]})})),I=(c(83),function(e){var t=e.data;return Object(l.jsx)("section",{className:"books-list",children:t.map((function(e){return Object(l.jsx)(B,{data:e},e.id)}))})}),W={fetchBooks:function(){return function(e){e(q()),S.get(C).then((function(t){var c=t.data;e(K(c.data))})).catch((function(t){e(z(t))}))}}},H=Object(m.b)((function(e){return{books:e.shop.books,isLoading:e.shop.isLoading,isError:e.shop.isError}}),W)((function(e){var t=e.fetchBooks,c=e.books,r=e.isLoading,s=e.isError;return Object(a.useEffect)((function(){t()}),[t]),Object(l.jsxs)("section",{className:"books-section",children:[Object(l.jsx)(I,{data:c}),r&&Object(l.jsx)("p",{className:"books-section__loading",children:"Loading..."}),s&&Object(l.jsx)("p",{className:"books-section__error",children:"An error has occurred"})]})})),J=(c(84),c(85),{removeFromCart:R}),Y=Object(m.b)((function(e){return{removeFromCart:R}}),J)((function(e){var t,c=e.item,a=e.removeFromCart;return Object(l.jsxs)("div",{className:"cart-summary-item",children:[Object(l.jsx)("img",{className:"cart-summary-item__img",src:c.cover_url,alt:"book cover"}),Object(l.jsx)("h4",{className:"cart-summary-item__title",children:"".concat(c.title.slice(0,20),"...")}),Object(l.jsxs)("p",{className:"cart-summary-item__quantity",children:["x ",c.qty," "]}),Object(l.jsxs)("p",{className:"cart-summary-item__price",children:[(t=c.price,(t/100).toFixed(2))," ",c.currency]}),Object(l.jsx)(h,{label:"USU\u0143",onClick:function(){return a(c.id)}})]})})),Z=Object(m.b)((function(e){return{cart:e.shop.cart}}))((function(e){var t,c=e.cart,r=Object(a.useState)(0),s=Object(O.a)(r,2),n=s[0],o=s[1],j=Object(a.useState)(!1),b=Object(O.a)(j,2),u=b[0],d=b[1];return Object(a.useEffect)((function(){var e=0;c.map((function(t){return e+=t.qty*t.price})),o(e),c.length>0?d(!0):d(!1)}),[c,n,o]),Object(l.jsxs)("div",{className:"cart-summary",children:[Object(l.jsx)("header",{className:"cart-summary__header",children:Object(l.jsx)("p",{className:"cart-summary__title",children:"Produkty"})}),Object(l.jsxs)("main",{className:"cart-summary__products",children:[0===c.length&&Object(l.jsx)("p",{className:"cart-summary__info",children:"Koszyk jest posty"}),c.map((function(e){return Object(l.jsx)(Y,{item:e},e.id)}))]}),Object(l.jsxs)("footer",{className:"cart-summary__footer",children:[Object(l.jsx)(i.b,{to:"/",children:Object(l.jsx)(h,{label:"WR\xd3\u0106 DO SKLEPU"})}),Object(l.jsxs)("p",{className:"cart-summary__total",children:["SUMA: ",Object(l.jsx)("span",{className:"cart-summary__total-price",children:(t=n,(t/100).toFixed(2))})," PLN"]}),Object(l.jsx)(i.b,{to:"/summary",children:u&&Object(l.jsx)(h,{label:"DALEJ"})})]})]})})),V=(c(86),c(44)),X=(c(88),Object(m.b)((function(e){return{cart:e.shop.cart}}))((function(e){var t=e.cart,c=Object(V.a)(),r=c.register,s=c.handleSubmit,n=c.errors,o=Object(a.useState)(!1),j=Object(O.a)(o,2),b=j[0],u=j[1];return Object(l.jsxs)("form",{className:"form",onSubmit:s((function(e,c){var a=e.first_name,r=e.last_name,s=e.city,n=e.zip_code;k.a.post("http://localhost:3001/api/order/",{order:t.map((function(e){return{id:e.id,quantity:e.qty}})),first_name:a,last_name:r,city:s,zip_code:n}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),c.target.reset(),u(!0)})),children:[b&&Object(l.jsx)("p",{className:"form__info",children:"Produkt zosta\u0142 zam\xf3wiony"}),Object(l.jsxs)("div",{className:"form__group",children:[Object(l.jsx)("label",{className:"form__label",htmlFor:"first_name",children:"Imi\u0119:"}),Object(l.jsx)("input",{className:"form__input",type:"text",id:"first_name",name:"first_name",ref:r({required:!0})}),n.first_name&&Object(l.jsx)("p",{className:"form__error",children:"Podaj imi\u0119"})]}),Object(l.jsxs)("div",{className:"form__group",children:[Object(l.jsx)("label",{className:"form__label",htmlFor:"last_name",children:"Nazwisko:"}),Object(l.jsx)("input",{className:"form__input",type:"text",id:"last_name",name:"last_name",ref:r({required:!0})}),n.last_name&&Object(l.jsx)("p",{className:"form__error",children:"Podaj nazwisko"})]}),Object(l.jsxs)("div",{className:"form__group",children:[Object(l.jsx)("label",{className:"form__label",htmlFor:"city",children:"Miejscowo\u015b\u0107"}),Object(l.jsx)("input",{className:"form__input",type:"text",id:"city",name:"city",ref:r({required:!0})}),n.city&&Object(l.jsx)("p",{className:"form__error",children:"Podaj miejscowo\u015b\u0107"})]}),Object(l.jsxs)("div",{className:"form__group",children:[Object(l.jsx)("label",{className:"form__label",htmlFor:"zip_code",children:"Kod pocztowy"}),Object(l.jsx)("input",{className:"form__input",type:"text",id:"zip_code",name:"zip_code",pattern:"([0-9]{2})(-[0-9]{3})",ref:r({required:!0})}),n.zip_code&&Object(l.jsx)("p",{className:"form__error",children:"Podaj kod pocztowy"})]}),Object(l.jsxs)("div",{className:"form__group form__group--flex",children:[Object(l.jsx)(i.b,{to:"/cart",children:Object(l.jsx)(h,{label:"WR\xd3C DO KOSZYKA"})}),Object(l.jsx)(h,{label:"ZAMAWIAM i P\u0141AC\u0118",type:"submit"})]})]})}))),Q=Object(m.b)((function(e){return{cart:e.shop.cart}}))((function(e){var t,c=e.cart,r=Object(a.useState)(0),s=Object(O.a)(r,2),n=s[0],i=s[1];return Object(a.useEffect)((function(){var e=0;c.map((function(t){return e+=t.qty*t.price})),i(e)}),[c,n,i]),Object(l.jsxs)("section",{className:"summary",children:[Object(l.jsx)("div",{className:"summary__total",children:Object(l.jsxs)("h3",{className:"summary__total-price",children:["Warto\u015b\u0107 zam\xf3wenia: ",(t=n,(t/100).toFixed(2))," PLN"]})}),Object(l.jsx)(X,{})]})}));var G=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(i.a,{children:[Object(l.jsx)(y,{}),Object(l.jsxs)(o.c,{children:[Object(l.jsx)(o.a,{path:"/",exact:!0,children:Object(l.jsx)(H,{})}),Object(l.jsx)(o.a,{path:"/cart",children:Object(l.jsx)(Z,{})}),Object(l.jsx)(o.a,{path:"/summary",children:Object(l.jsx)(Q,{})})]})]})})},$=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,90)).then((function(t){var c=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,n=t.getTTFB;c(e),a(e),r(e),s(e),n(e)}))},ee=c(17),te=c(43),ce=Object(ee.c)({shop:U}),ae=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ee.d)(Object(ee.a)(te.a)),re=Object(ee.e)(ce,ae);n.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(m.a,{store:re,children:Object(l.jsx)(G,{})})}),document.getElementById("root")),$()}},[[89,1,2]]]);
//# sourceMappingURL=main.24a273cc.chunk.js.map